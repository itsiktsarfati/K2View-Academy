# Create DSAR Following Stages

In this section, additional stages and tasks are created in order to complete the configuration of our DSAR Tutorial Flow. 

In addition to the steps described below, you can also review the DSAR flow implementation that comes together with your DPM installation.

<img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Built_In_Flow.png" width="100%" height="100%">

The sample Stages we will create include: 

- **Data Collection** - an automated task that collects the customer data from the different corporate systems. In the sample implementation of this tutorial, the information is collected from Odoo and Open Source Billing systems.
- **File generation** - Once the information was collected, an automated activity creates a PDF including the customer data. 
- **Review and Approval**  - Review of the resulted PDF - in our example, this review is expected to be done by both the Legal Data Steward team as well as by the Case Owner. 
- **Customer Notification** - after the PDF was generated and reviewed, the request fulfilment is completed, and the customer can be notified and delivered the results. 

### Data Collection

1. add a new Create a new Stage called Data Collection:

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Data_Collection_Stage.png" width="30%" height="30%">

2. Add a new task under this stage, called "Collect Customer Data".

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Data_Collection_Task.png" width="80%" height="80%">

3. In the operations Tab, select the CollectCaseCustomerData operation. This automatic operation retrieves the customer data from any integrated system. 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Data_Collection_operations.png" width="80%" height="80%">

4. Save the new task

### File Generation

1. add a new Stage called File Creation. 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_File_Generation_Stage.png" width="30%" height="30%">

2. Add a new task under this stage, called "Generate PDF File".

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_File_Generation_Task.png" width="80%" height="80%">

3. In the operations Tab, select the GenerateCustomerPDF operation. This automatic operation formats the data that was collected about the customer in a PDF. 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_File_Generation_Operations.png" width="80%" height="80%">

4. Save the new task

### Review and Approval

1. add a new Create a new Stage called Review & Approval. 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Review_Approval_Stage.png" width="30%" height="30%">

2. Add a new task under this stage, called "Legal Review". This is configured as a manual task where the Legal data stewards team should review the PDF that was generated by the previous task, and if the content is according to the expectation, approve the notification to the customer.  Being a manual task, we can assume it would take longer time to complete, so adjust the deadline of this task according to the duration you consider reasonable. We have set it to 48 minutes in the example below. 

   Choosing the duration to be 48 minutes  is not accidental: in order to facilitate the testing process of your flows, the DPM system can be configured to work with different time units such as Minutes or Hours. at testing, you would usually use the configuration of Minutes so that tests can be concluded rapidly. In production however, you would typically use the Hours configuration. Thus, the duration of the task that had 48 minutes in testing, would be of two days (48 hours) in production. 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Review_Approval_Task.png" width="80%" height="80%">

3. As this is a manual operation, we will also configure reminders in two intervals - one to the Legal team and the other to the Case Owner, so that if for some reason this task is not being completed, the relevant users would be notified to take action. 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Review_Approval_Reminders.png" width="80%" height="80%">

4. Save the new task

5. Create another task under the same stage: Case Owner Review. Assign it to the Case Owner Role. This too is a manual task that should be executed after the legal review was completed. Therefore, set the order of this task to be 2, and give it a 24 minutes deadline. 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Review_Approval_Case_Owner.png" width="80%" height="80%">

### 	Customer Notification

1. add a new Create a new Stage called Customer Notification. 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Customer_Notification_Stage.png" width="30%" height="30%">

2. Add a new task under this stage, called "E-mail Customer".

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Customer_Notification_Task.png" width="80%" height="80%">

3. In the operations Tab, select the SendEmailTo operation. This automatic operation formats that will send notification to the customer once the request was completed successfully and the PDF can be delivered to the customer. Configure the input parameter in the way shown below. 

   The input parameter "Recipient" was configured here to be obtained from the customer at the moment of request submission - the customer will be prompted to provide the address by the label: "Provide the address for sending the results" as we will see in the tutorial section of the customer request submission.

   The input parameter "Subject" was set to a fixed value - "Your DSAR was Completed"

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Customer_Notification_Operations.png" width="80%" height="80%">

4. Save the new task

Your DSAR Flow is now complete. The final result should look similar to the following image: 

   <img src="/articles/demo_project/DPM_Demo_Project/images/01_02_03_DSAR_Final_Flow.png" width="100%" height="100%">
