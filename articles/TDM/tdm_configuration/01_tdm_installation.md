# TDM Installation

## TDM Installation  -  Prerequisites

The following components must be installed to install the TDM:

- **Fabric Docker** -  Fabric 6.5 is needed to TDM 7.1.
- **PostgreSQL DB** - the TDM DB tables are created on a PostgreSQL DB. Note that you can either use a PostgreSQL v9.6 or v13 versions. 

## TDM Package

The TDM Package installs the TDM GUI application.

The TDM package creates the following sub directories: 

- apps/nodejs:
  - This is the Node.js component. The TDM GUI works with **10.20.1** Node.js version.
- apps/pgsql-9.6:
  - This directory is needed to enable running the TDM scripts to create the TDM DB on the pre-installed PostgreSQL DB.
- webserver/static/TDM:
  - This directory contain the code of the TDM GUI application.
- TDMGUI:
  - Contains the scripts to create the TDM DB and the HTML of the TDM API DOC.

In addition the TDM package updates the following:

- Updates the **.bash_profile** file:
  - Adds the $K2_HOME/apps/pgsql-9.6/bin/ and $K2_HOME/apps/nodejs/bin to the PATH variable.
  - Adds $K2_HOME/apps/pgsql-9.6/lib/ to the LD_LIBRARY_PATH variable.
- Updates fabric/staticWeb/apps.json:
  - Add the TDM to Fabric Web Framework applications.
  - Click for more information about [adding applications to Fabric Web Framework](/articles/30_web_framework/02_preintegrated_apps_overview.md).

### Installing the TDM Package on the Fabric Docker

- Download the the TDM package from the download page. Copy it under the  $K2_HOME directory and untar it using the following command:

  ```
  tar -zxvf <TDM GUI tar file>
  ```

  **Example:**

  **tar -zxvf tdmgui7.1.0_1.tar.gz**

- Start or restart the Fabric node.

- **Notes:**
  - It is possible to install the TDM application on several Fabric nodes of Fabric cluster, but all of them must work with the same TDM DB.
  - All Fabric modes must work with the same Redis to have an alignment of the sequence and masking values, generated by the TDM tasks.

### Redis

The Redis must run in one of the Fabric nodes. All Fabric nodes must work with the same Redis.

#### Open the Redis Port

- Edit the **docker-compose.yml** file of Fabric docker and add the Redis port to the port list:  

  ```
  - "6379:6379"
  ```

  

- Run the following command to create and start the container: 

  ```
  docker-compose up -d
  ```

  

#### Start the Redis on one of the Fabric Nodes

- Go to $K2_HOME/apps/redis/src
- Run the following command:       

```
nohup ./redis-server /usr/local/k2view/apps/redis/redis.conf &
```

#### Adding a Password to Redis (Optional)



Authing with password

\1. ./redis-cli

\2. CONFIG SET requirepass "Yomtov11!"

\3. AUTH Yomtov11!
 
 
 to untar the tar file of TDMGUI

tar -zxvf <file_name>

